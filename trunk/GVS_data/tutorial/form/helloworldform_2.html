<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Hello World Form</title>
        <style type="text/css">
            h1 {
                color: #779dce;
                font-size: 14pt;
            }
            #main {
                background-color: #D7D7D7;
                width: 90%;
                min-width: 250px;
                margin: 0px auto;
                padding: 5ex 2ex;
            }
            #username {
                font-weight: bold;
            }
        </style>
        <script type="text/javascript">
            var {{buildingblockid}} = Class.create(BuildingBlock, {
                init: function() {
                    $("username").update("nobody");
                    $("answer").value = "Fine!";
                    $("send").observe("click", this._onClick.bind(this));
                },
                showUser: function(user) {
                    /* user = {
                        "uri": "factUri",
                        "data": {
                            "username": ...,
                            "email": ...,
                            ...
                        }
                    }*/
                    if (user.data && user.data.username) {
                        $("username").update(user.data.username);
                    }
                },

                _onClick: function(e) {
                    var message = {
                        'id': 'message',
                        'data': {
                            'message': $("answer").value
                        }
                    };
                    this.manageData([message], [], []);
                }
            });
        </script>
    </head>
    <body>
        <div id="main">
            <h1>Hello World Form!</h1>
            <p>Welcome, <span id="username"></span></p>
            <p>How do you feel today?</p>
            <div>
                <input type="text" id="answer" /><input type="button" id="send"
                value="Send" />
            </div>
        </div>
    </body>
</html>
